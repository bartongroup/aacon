<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_121) on Fri Apr 21 15:10:54 BST 2017 -->
<title>ConservationCalculator</title>
<meta name="date" content="2017-04-21">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ConservationCalculator";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConservationCalculator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../compbio/conservation/ConservationFormatter.html" title="class in compbio.conservation"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?compbio/conservation/ConservationCalculator.html" target="_top">Frames</a></li>
<li><a href="ConservationCalculator.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">compbio.conservation</div>
<h2 title="Class ConservationCalculator" class="title">Class ConservationCalculator</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>compbio.conservation.ConservationCalculator</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">ConservationCalculator</span>
extends java.lang.Object</pre>
<div class="block">A public API for conservation calculation methods.
 
 Input in all methods are <br/>
 1) The list of FastaSequence objects holding the aligned sequences. All
 sequences must be of the same length (as this is an alignment). The input can
 be conveniently loaded from either the Clustal formatted alignment file or
 the file containing a list of FASTA formatted sequences using the following
 method:
 
 <pre>
 <code>
 	List&lt;FastaSequence&gt; sequences = CmdParser
 			.openInputStream(&lt;PATH_TO_INPUT_FILE&gt;);
 </code>
 </pre>
 
 2) The boolean parameters telling the system whether the results should be
 normalized or not. Normalized results have values between 0 and 1. Please
 note however, that some results cannot be normalized. In such a case, the
 system returns not normalized values, and log the issue to the standard error
 stream. The following formula is used for normalization n = (d - dmin)/(dmax
 - dmin) Negative results first converted to positive by adding an absolute
 value of the most negative result. <br/>
 3) The ExecutorService object which is used to parallel the calculations. The
 ExecutorService initialized with the number of threads equals to the number
 of cores on the executing machine can be obtained as follows: <br/>
 
 <pre>
 <code> int corenum = Runtime.getRuntime().availableProcessors();
   ExecutorService executor = Executors.newFixedThreadPool(corenum);
   
   ........DO CALCULATIONS.........
   
   // shutdown the Executor 
   executor.shutdown(); 
   </code>
 </pre>
 
 
 Please take care to initialize and pass only one executor to all the methods
 to avoid the waist of resources. After use, the executor must be disposed of,
 it can be done as follows: <code>executor.shutdown(); </code>
 
 An example use of this class for calculating conservation is below: <br/>
 
 <pre><code>
 
 	// Determine the number of CPU cores available on the system.  
 	int corenum = Runtime.getRuntime().availableProcessors();
 	
 	// Initialize the Executor instance with a number of cores
	ExecutorService executor = Executors.newFixedThreadPool(corenum);
	
	// Load the data from the file containing either Clustal formatted alignment 
	// or a list of FASTA formatted sequences
	List&lt;FastaSequence&gt; sequences = CmdParser
				.openInputStream("test/data/small.align");
	
	// Calculate conservation scores using all the methods available.
	Map&lt;Method, double[]&gt; result = getConservation(sequences, true,
	EnumSet.allOf(ConservationMethod.class), executor);
	
	// Print the results to the console.  
	ConservationFormatter.outputScoreLine(result, System.out);
 </code> 
  </pre></div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>1.0 October 2010</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Peter Troshin</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../compbio/conservation/ConservationCalculator.html#ConservationCalculator--">ConservationCalculator</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static java.util.Map&lt;compbio.data.sequence.ConservationMethod,double[]&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../compbio/conservation/ConservationCalculator.html#getConservation-java.util.List-boolean-java.util.Set-java.util.concurrent.ExecutorService-">getConservation</a></span>(java.util.List&lt;compbio.data.sequence.FastaSequence&gt;&nbsp;alignment,
               boolean&nbsp;normalize,
               java.util.Set&lt;compbio.data.sequence.ConservationMethod&gt;&nbsp;methods,
               java.util.concurrent.ExecutorService&nbsp;executor)</code>
<div class="block">Calculates the conservation by all the methods defined by
 <code>ConservationMethod</code> enumeration apart from SMERFS.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static double[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../compbio/conservation/ConservationCalculator.html#getSMERFSScore-compbio.data.sequence.Alignment-int-compbio.data.sequence.SMERFSConstraints-float-boolean-java.util.concurrent.ExecutorService-">getSMERFSScore</a></span>(compbio.data.sequence.Alignment&nbsp;alignment,
              int&nbsp;windowWidth,
              compbio.data.sequence.SMERFSConstraints&nbsp;scoringMethod,
              float&nbsp;gapTreshold,
              boolean&nbsp;normalize,
              java.util.concurrent.ExecutorService&nbsp;service)</code>
<div class="block">Calculating the SMERFS score with custom parameters</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ConservationCalculator--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ConservationCalculator</h4>
<pre>public&nbsp;ConservationCalculator()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getConservation-java.util.List-boolean-java.util.Set-java.util.concurrent.ExecutorService-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConservation</h4>
<pre>public static&nbsp;java.util.Map&lt;compbio.data.sequence.ConservationMethod,double[]&gt;&nbsp;getConservation(java.util.List&lt;compbio.data.sequence.FastaSequence&gt;&nbsp;alignment,
                                                                                               boolean&nbsp;normalize,
                                                                                               java.util.Set&lt;compbio.data.sequence.ConservationMethod&gt;&nbsp;methods,
                                                                                               java.util.concurrent.ExecutorService&nbsp;executor)
                                                                                        throws java.lang.InterruptedException</pre>
<div class="block">Calculates the conservation by all the methods defined by
 <code>ConservationMethod</code> enumeration apart from SMERFS.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>alignment</code> - the list of FastaSequence objects holding the alignment. All
            sequences must be of the same length.</dd>
<dd><code>normalize</code> - true if the resulting scores should be normalized, false
            otherwise.</dd>
<dd><code>methods</code> - the methods to be used for the calculation, all
            <code>ConservationMethod</code> but SMERFS can be used. The
            <code>EnumSet</code> class provides a number of convenience methods
            which can be used to prepare a set of methods for the input.
            For example, to use <code>ConservationMethod.KABAT</code> for
            conservation calculation one could construct a set in the
            following way: <code>EnumSet.of(ConservationMethod.KABAT)</code>.<br/>
 
            For all the methods, but SMERFS use the following construct:
 
 <br/> <code>EnumSet.complementOf(EnumSet.of(ConservationMethod.SMERFS))</code> <br/>
 
            For a set of methods including KABAT, JORES, SCHNEIDER,
            SHENKIN, GERSTEIN use the following construct:
 
 <br/>
            <code>EnumSet.range(ConservationMethod.KABAT, ConservationMethod.GERSTEIN)</code>
 <br/>
 
            For further details see <code>EnumSet</code></dd>
<dd><code>executor</code> - the <code>ExecutorService</code> to be used to parallelize the
            calculations</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the Map of ConservationMethod->double[] conservation scores</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code> - if the calculating Thread was interrupted</dd>
</dl>
</li>
</ul>
<a name="getSMERFSScore-compbio.data.sequence.Alignment-int-compbio.data.sequence.SMERFSConstraints-float-boolean-java.util.concurrent.ExecutorService-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getSMERFSScore</h4>
<pre>public static&nbsp;double[]&nbsp;getSMERFSScore(compbio.data.sequence.Alignment&nbsp;alignment,
                                      int&nbsp;windowWidth,
                                      compbio.data.sequence.SMERFSConstraints&nbsp;scoringMethod,
                                      float&nbsp;gapTreshold,
                                      boolean&nbsp;normalize,
                                      java.util.concurrent.ExecutorService&nbsp;service)</pre>
<div class="block">Calculating the SMERFS score with custom parameters</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>alignment</code> - the List of FastaSequence objects holding each sequence from
            the alignment</dd>
<dd><code>windowWidth</code> - the window size parameter for SMERFS algorithm</dd>
<dd><code>scoringMethod</code> - the <code>SMERFSConstraints</code></dd>
<dd><code>gapTreshold</code> - the gap threshold for SMERFS algorithm</dd>
<dd><code>normalize</code> - the boolean value indicating whether the resulting score
            should be normalized, true if it does.</dd>
<dd><code>service</code> - the <code>ExecutorService</code> to be used to parallel
            calculations</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the array of double values - SMERFS scores for each position in
         the alignment</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConservationCalculator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../compbio/conservation/ConservationFormatter.html" title="class in compbio.conservation"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?compbio/conservation/ConservationCalculator.html" target="_top">Frames</a></li>
<li><a href="ConservationCalculator.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
